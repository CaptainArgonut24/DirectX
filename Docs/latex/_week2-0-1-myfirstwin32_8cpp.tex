\hypertarget{_week2-0-1-myfirstwin32_8cpp}{}\doxysection{Week2/\+Week 2-\/0-\/myfirstwin32/\+Week2-\/0-\/1-\/myfirstwin32.cpp File Reference}
\label{_week2-0-1-myfirstwin32_8cpp}\index{Week2/Week 2-\/0-\/myfirstwin32/Week2-\/0-\/1-\/myfirstwin32.cpp@{Week2/Week 2-\/0-\/myfirstwin32/Week2-\/0-\/1-\/myfirstwin32.cpp}}


Illustrates the minimal amount of the Win32 code needed for Direct3D programming.  


{\ttfamily \#include $<$windows.\+h$>$}\newline
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{_week2-0-1-myfirstwin32_8cpp_ab8486c7144b04977e4ed8b5b7daa21b6}{Init\+Windows\+App}} (HINSTANCE instance\+Handle, int show)
\begin{DoxyCompactList}\small\item\em Wraps the code necessary to initialize a Windows application. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{_week2-0-1-myfirstwin32_8cpp_aac704aea738c1edc384a97e51d60662b}{Run}} ()
\begin{DoxyCompactList}\small\item\em Wraps the message loop code. \end{DoxyCompactList}\item 
LRESULT CALLBACK \mbox{\hyperlink{_week2-0-1-myfirstwin32_8cpp_a2641211f9fb5d626cfc3bbfd916829b0}{Wnd\+Proc}} (HWND h\+Wnd, UINT msg, WPARAM w\+Param, LPARAM l\+Param)
\begin{DoxyCompactList}\small\item\em The window procedure handles events our window receives. \end{DoxyCompactList}\item 
int WINAPI \mbox{\hyperlink{_week2-0-1-myfirstwin32_8cpp_a693c206d5a0fb9775a3c249176a9e089}{Win\+Main}} (HINSTANCE h\+Instance, HINSTANCE h\+Prev\+Instance, PSTR p\+Cmd\+Line, int n\+Show\+Cmd)
\begin{DoxyCompactList}\small\item\em Windows equivalant to \mbox{\hyperlink{_week1-1-_x_m_verify_c_p_u_support_8cpp_ae66f6b31b5ad750f1fe042a706a4e3d4}{main()}} -\/ \#define WINAPI \+\_\+\+\_\+stdcall specifies the calling convention of the function, how the function arguments get placed on the stack. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
HWND \mbox{\hyperlink{_week2-0-1-myfirstwin32_8cpp_ab83be9929c1aaf9638ea2f4bff0dbe99}{gh\+Main\+Wnd}} = 0
\begin{DoxyCompactList}\small\item\em The main window handle; this is used to identify a created window. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Illustrates the minimal amount of the Win32 code needed for Direct3D programming. 

Include the windows header file; this has all the Win32 API structures, types, and function declarations we need to program Windows.

\begin{DoxyAttention}{Attention}
\+: Program requires Windows Desktop Empty App! 
\end{DoxyAttention}
\begin{DoxyNote}{Note}
\+: Use \char`\"{}\+Windows Desktop Wizard Template\char`\"{}, Empty Project, Chosse Windows Desktop Application
\end{DoxyNote}
\begin{DoxyAuthor}{Author}
Hooman Salamat 
\end{DoxyAuthor}
\begin{DoxyRefDesc}{Bug}
\item[\mbox{\hyperlink{bug__bug000011}{Bug}}]No known bugs. \end{DoxyRefDesc}


Definition in file \mbox{\hyperlink{_week2-0-1-myfirstwin32_8cpp_source}{Week2-\/0-\/1-\/myfirstwin32.\+cpp}}.



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{_week2-0-1-myfirstwin32_8cpp_ab8486c7144b04977e4ed8b5b7daa21b6}\label{_week2-0-1-myfirstwin32_8cpp_ab8486c7144b04977e4ed8b5b7daa21b6}} 
\index{Week2-\/0-\/1-\/myfirstwin32.cpp@{Week2-\/0-\/1-\/myfirstwin32.cpp}!InitWindowsApp@{InitWindowsApp}}
\index{InitWindowsApp@{InitWindowsApp}!Week2-\/0-\/1-\/myfirstwin32.cpp@{Week2-\/0-\/1-\/myfirstwin32.cpp}}
\doxysubsubsection{\texorpdfstring{InitWindowsApp()}{InitWindowsApp()}}
{\footnotesize\ttfamily bool Init\+Windows\+App (\begin{DoxyParamCaption}\item[{HINSTANCE}]{instance\+Handle,  }\item[{int}]{show }\end{DoxyParamCaption})}



Wraps the code necessary to initialize a Windows application. 

our wrapper function (Init\+Windows\+App) to create and initialize the main application window, passing in the h\+Instance and n\+Show\+Cmd values as arguments.

Function returns true if initialization was successful, otherwise it returns false. The first task to creating a window is to describe some of its characteristics by filling out a WNDCLASS structure.

redrew when horizontal or vertical window size is changed

pointer to windows procedure function, if you have two windows, you might consider having 2 windows classes with 2 different window procedures

extra memory slots

extra memory slots

deault application icon -\/ you can use your own design icon

uses standard arrow cursor -\/ you can use your own design cursor

uses white color as the background color for the client area of the window.

spcifies the windows menu. We have no menu.

Next, we register this WNDCLASS instance with Windows so that we can create a window based on it.

With our WNDCLASS instance registered, we can create a window with the Create\+Window function. This function returns a handle to the window it creates (an HWND). If the creation failed, the handle will have the value of zero. \mbox{\hyperlink{class_a}{A}} window handle is a way to refer to the window, which is internally managed by Windows. Many of the Win32 API functions that operate on windows require an HWND so that they know what window to act on.

Registered WNDCLASS instance to use.

window title

style flags such as WS\+\_\+\+MINIMIZEBOX, etc..

x-\/coordinate of top-\/left corner relative to the screen

y-\/coordinate of top-\/left corner relative to the screen

width in pixels

height in pixels

parent window -\/ there is no parent window

menu handle -\/ we have no menu

app instance

extra creation parameters, \mbox{\hyperlink{class_a}{A}} window handles the WM\+\_\+\+CREATE message if it wants to do something.

Even though we just created a window, it is not initially shown. Therefore, the final step is to show and update the window we just created, which can be done with the following two function calls. Observe that we pass the handle to the window we want to show and update so that these functions know which window to show and update. ~\newline


Definition at line \mbox{\hyperlink{_week2-0-1-myfirstwin32_8cpp_source_l00052}{52}} of file \mbox{\hyperlink{_week2-0-1-myfirstwin32_8cpp_source}{Week2-\/0-\/1-\/myfirstwin32.\+cpp}}.

\mbox{\Hypertarget{_week2-0-1-myfirstwin32_8cpp_aac704aea738c1edc384a97e51d60662b}\label{_week2-0-1-myfirstwin32_8cpp_aac704aea738c1edc384a97e51d60662b}} 
\index{Week2-\/0-\/1-\/myfirstwin32.cpp@{Week2-\/0-\/1-\/myfirstwin32.cpp}!Run@{Run}}
\index{Run@{Run}!Week2-\/0-\/1-\/myfirstwin32.cpp@{Week2-\/0-\/1-\/myfirstwin32.cpp}}
\doxysubsubsection{\texorpdfstring{Run()}{Run()}}
{\footnotesize\ttfamily int Run (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Wraps the message loop code. 

int \mbox{\hyperlink{_week2-0-1-myfirstwin32_8cpp_aac704aea738c1edc384a97e51d60662b}{Run()}} \{ MSG msg = \{ 0 \}; //! Loop until we get a WM\+\_\+\+QUIT message.

The function //! Get\+Message will only return 0 (false) when a WM\+\_\+\+QUIT message //! is received, which effectively exits the loop. The function //! returns -\/1 if there is an error. Also, note that Get\+Message //! puts the application thread to sleep until there is a //! message. BOOL b\+Ret = 1; while ((b\+Ret = Get\+Message(\&msg, 0, 0, 0)) != 0) \{ if (b\+Ret == -\/1) \{ Message\+Box(0, L\char`\"{}\+Get\+Message FAILED\char`\"{}, L\char`\"{}\+Error\char`\"{}, MB\+\_\+\+OK); break; \} else \{ Translate\+Message(\&msg); Dispatch\+Message(\&msg); \} \} return (int)msg.\+w\+Param; \} If there are Window messages then process them.

Otherwise, do animation/game stuff.

Definition at line \mbox{\hyperlink{_week2-0-1-myfirstwin32_8cpp_source_l00141}{141}} of file \mbox{\hyperlink{_week2-0-1-myfirstwin32_8cpp_source}{Week2-\/0-\/1-\/myfirstwin32.\+cpp}}.

\mbox{\Hypertarget{_week2-0-1-myfirstwin32_8cpp_a693c206d5a0fb9775a3c249176a9e089}\label{_week2-0-1-myfirstwin32_8cpp_a693c206d5a0fb9775a3c249176a9e089}} 
\index{Week2-\/0-\/1-\/myfirstwin32.cpp@{Week2-\/0-\/1-\/myfirstwin32.cpp}!WinMain@{WinMain}}
\index{WinMain@{WinMain}!Week2-\/0-\/1-\/myfirstwin32.cpp@{Week2-\/0-\/1-\/myfirstwin32.cpp}}
\doxysubsubsection{\texorpdfstring{WinMain()}{WinMain()}}
{\footnotesize\ttfamily int WINAPI Win\+Main (\begin{DoxyParamCaption}\item[{HINSTANCE}]{h\+Instance,  }\item[{HINSTANCE}]{h\+Prev\+Instance,  }\item[{PSTR}]{p\+Cmd\+Line,  }\item[{int}]{n\+Show\+Cmd }\end{DoxyParamCaption})}



Windows equivalant to \mbox{\hyperlink{_week1-1-_x_m_verify_c_p_u_support_8cpp_ae66f6b31b5ad750f1fe042a706a4e3d4}{main()}} -\/ \#define WINAPI \+\_\+\+\_\+stdcall specifies the calling convention of the function, how the function arguments get placed on the stack. 


\begin{DoxyParams}{Parameters}
{\em n\+Show\+Cmd} & how our application should be displayed min-\/maximized \\
\hline
\end{DoxyParams}
First call our wrapper function (Init\+Windows\+App)

Once our application has been created and initialized we enter the message loop. We stay in the message loop until a WM\+\_\+\+QUIT mesage is received, indicating the application should be terminated.

Definition at line \mbox{\hyperlink{_week2-0-1-myfirstwin32_8cpp_source_l00035}{35}} of file \mbox{\hyperlink{_week2-0-1-myfirstwin32_8cpp_source}{Week2-\/0-\/1-\/myfirstwin32.\+cpp}}.

\mbox{\Hypertarget{_week2-0-1-myfirstwin32_8cpp_a2641211f9fb5d626cfc3bbfd916829b0}\label{_week2-0-1-myfirstwin32_8cpp_a2641211f9fb5d626cfc3bbfd916829b0}} 
\index{Week2-\/0-\/1-\/myfirstwin32.cpp@{Week2-\/0-\/1-\/myfirstwin32.cpp}!WndProc@{WndProc}}
\index{WndProc@{WndProc}!Week2-\/0-\/1-\/myfirstwin32.cpp@{Week2-\/0-\/1-\/myfirstwin32.cpp}}
\doxysubsubsection{\texorpdfstring{WndProc()}{WndProc()}}
{\footnotesize\ttfamily LRESULT CALLBACK Wnd\+Proc (\begin{DoxyParamCaption}\item[{HWND}]{h\+Wnd,  }\item[{UINT}]{msg,  }\item[{WPARAM}]{w\+Param,  }\item[{LPARAM}]{l\+Param }\end{DoxyParamCaption})}



The window procedure handles events our window receives. 

callback function means Windows will be calling this function outside of the code space of the program Handle some specific messages. Note that if we handle a message, we should return 0.

In the case the left mouse button was pressed, then display a message box.

In the case the escape key was pressed, then destroy the main application window.

In the case of a destroy message, then send a quit message, which will terminate the message loop.

Forward any other messages we did not handle above to the default window procedure. Note that our window procedure must return the return value of Def\+Window\+Proc.

Definition at line \mbox{\hyperlink{_week2-0-1-myfirstwin32_8cpp_source_l00161}{161}} of file \mbox{\hyperlink{_week2-0-1-myfirstwin32_8cpp_source}{Week2-\/0-\/1-\/myfirstwin32.\+cpp}}.



\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{_week2-0-1-myfirstwin32_8cpp_ab83be9929c1aaf9638ea2f4bff0dbe99}\label{_week2-0-1-myfirstwin32_8cpp_ab83be9929c1aaf9638ea2f4bff0dbe99}} 
\index{Week2-\/0-\/1-\/myfirstwin32.cpp@{Week2-\/0-\/1-\/myfirstwin32.cpp}!ghMainWnd@{ghMainWnd}}
\index{ghMainWnd@{ghMainWnd}!Week2-\/0-\/1-\/myfirstwin32.cpp@{Week2-\/0-\/1-\/myfirstwin32.cpp}}
\doxysubsubsection{\texorpdfstring{ghMainWnd}{ghMainWnd}}
{\footnotesize\ttfamily HWND gh\+Main\+Wnd = 0}



The main window handle; this is used to identify a created window. 

In Windows programming, we often use handles to refer to objects maintained internally by Windows. gh\+Main\+Wnd is our main application window. 

Definition at line \mbox{\hyperlink{_week2-0-1-myfirstwin32_8cpp_source_l00020}{20}} of file \mbox{\hyperlink{_week2-0-1-myfirstwin32_8cpp_source}{Week2-\/0-\/1-\/myfirstwin32.\+cpp}}.

