\doxysection{DXSample.\+cpp}
\label{_week2-7-_hello_01_world_2_d_x_sample_8cpp_source}\index{Week2/Week2-\/7-\/Hello World/DXSample.cpp@{Week2/Week2-\/7-\/Hello World/DXSample.cpp}}
\textbf{ Go to the documentation of this file.}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001 \textcolor{comment}{//*********************************************************}}
\DoxyCodeLine{00002 \textcolor{comment}{//}}
\DoxyCodeLine{00003 \textcolor{comment}{// Copyright (c) Microsoft. All rights reserved.}}
\DoxyCodeLine{00004 \textcolor{comment}{// This code is licensed under the MIT License (MIT).}}
\DoxyCodeLine{00005 \textcolor{comment}{// THIS CODE IS PROVIDED *AS IS* WITHOUT WARRANTY OF}}
\DoxyCodeLine{00006 \textcolor{comment}{// ANY KIND, EITHER EXPRESS OR IMPLIED, INCLUDING ANY}}
\DoxyCodeLine{00007 \textcolor{comment}{// IMPLIED WARRANTIES OF FITNESS FOR A PARTICULAR}}
\DoxyCodeLine{00008 \textcolor{comment}{// PURPOSE, MERCHANTABILITY, OR NON-\/INFRINGEMENT.}}
\DoxyCodeLine{00009 \textcolor{comment}{//}}
\DoxyCodeLine{00010 \textcolor{comment}{//*********************************************************}}
\DoxyCodeLine{00011 }
\DoxyCodeLine{00012 \textcolor{preprocessor}{\#include "{}stdafx.h"{}}}
\DoxyCodeLine{00013 \textcolor{preprocessor}{\#include "{}DXSample.h"{}}}
\DoxyCodeLine{00014 }
\DoxyCodeLine{00015 \textcolor{keyword}{using namespace }Microsoft::WRL;}
\DoxyCodeLine{00016 }
\DoxyCodeLine{00017 DXSample::DXSample(UINT width, UINT height, std::wstring name) :}
\DoxyCodeLine{00018     m\_width(width),}
\DoxyCodeLine{00019     m\_height(height),}
\DoxyCodeLine{00020     m\_title(name),}
\DoxyCodeLine{00021     m\_useWarpDevice(true)}
\DoxyCodeLine{00022 \{}
\DoxyCodeLine{00023     WCHAR assetsPath[512];}
\DoxyCodeLine{00024     GetAssetsPath(assetsPath, \_countof(assetsPath));}
\DoxyCodeLine{00025     m\_assetsPath = assetsPath;}
\DoxyCodeLine{00026 }
\DoxyCodeLine{00027     m\_aspectRatio = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(width) / \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(height);}
\DoxyCodeLine{00028 \}}
\DoxyCodeLine{00029 }
\DoxyCodeLine{00030 DXSample::\string~DXSample()}
\DoxyCodeLine{00031 \{}
\DoxyCodeLine{00032 \}}
\DoxyCodeLine{00033 }
\DoxyCodeLine{00034 \textcolor{comment}{// Helper function for resolving the full path of assets.}}
\DoxyCodeLine{00035 std::wstring DXSample::GetAssetFullPath(LPCWSTR assetName)}
\DoxyCodeLine{00036 \{}
\DoxyCodeLine{00037     \textcolor{keywordflow}{return} m\_assetsPath + assetName;}
\DoxyCodeLine{00038 \}}
\DoxyCodeLine{00039 }
\DoxyCodeLine{00040 \textcolor{comment}{// Helper function for acquiring the first available hardware adapter that supports Direct3D 12.}}
\DoxyCodeLine{00041 \textcolor{comment}{// If no such adapter can be found, *ppAdapter will be set to nullptr.}}
\DoxyCodeLine{00042 \_Use\_decl\_annotations\_}
\DoxyCodeLine{00043 \textcolor{keywordtype}{void} DXSample::GetHardwareAdapter(IDXGIFactory2* pFactory, IDXGIAdapter1** ppAdapter)}
\DoxyCodeLine{00044 \{}
\DoxyCodeLine{00045     ComPtr<IDXGIAdapter1> adapter;}
\DoxyCodeLine{00046     *ppAdapter = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00047 }
\DoxyCodeLine{00048     \textcolor{keywordflow}{for} (UINT adapterIndex = 0; DXGI\_ERROR\_NOT\_FOUND != pFactory-\/>EnumAdapters1(adapterIndex, \&adapter); ++adapterIndex)}
\DoxyCodeLine{00049     \{}
\DoxyCodeLine{00050         DXGI\_ADAPTER\_DESC1 desc;}
\DoxyCodeLine{00051         adapter-\/>GetDesc1(\&desc);}
\DoxyCodeLine{00052 }
\DoxyCodeLine{00053         \textcolor{keywordflow}{if} (desc.Flags \& DXGI\_ADAPTER\_FLAG\_SOFTWARE)}
\DoxyCodeLine{00054         \{}
\DoxyCodeLine{00055             \textcolor{comment}{// Don't select the Basic Render Driver adapter.}}
\DoxyCodeLine{00056             \textcolor{comment}{// If you want a software adapter, pass in "{}/warp"{} on the command line.}}
\DoxyCodeLine{00057             \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00058         \}}
\DoxyCodeLine{00059 }
\DoxyCodeLine{00060         \textcolor{comment}{// Check to see if the adapter supports Direct3D 12, but don't create the}}
\DoxyCodeLine{00061         \textcolor{comment}{// actual device yet.}}
\DoxyCodeLine{00062         \textcolor{keywordflow}{if} (SUCCEEDED(D3D12CreateDevice(adapter.Get(), D3D\_FEATURE\_LEVEL\_11\_0, \_uuidof(ID3D12Device), \textcolor{keyword}{nullptr})))}
\DoxyCodeLine{00063         \{}
\DoxyCodeLine{00064             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00065         \}}
\DoxyCodeLine{00066     \}}
\DoxyCodeLine{00067 }
\DoxyCodeLine{00068     *ppAdapter = adapter.Detach();}
\DoxyCodeLine{00069 \}}
\DoxyCodeLine{00070 }
\DoxyCodeLine{00071 \textcolor{comment}{// Helper function for setting the window's title text.}}
\DoxyCodeLine{00072 \textcolor{keywordtype}{void} DXSample::SetCustomWindowText(LPCWSTR text)}
\DoxyCodeLine{00073 \{}
\DoxyCodeLine{00074     std::wstring windowText = m\_title + L\textcolor{stringliteral}{"{}: "{}} + text;}
\DoxyCodeLine{00075     SetWindowText(Win32Application::GetHwnd(), windowText.c\_str());}
\DoxyCodeLine{00076 \}}
\DoxyCodeLine{00077 }
\DoxyCodeLine{00078 \textcolor{comment}{// Helper function for parsing any supplied command line args.}}
\DoxyCodeLine{00079 \_Use\_decl\_annotations\_}
\DoxyCodeLine{00080 \textcolor{keywordtype}{void} DXSample::ParseCommandLineArgs(WCHAR* argv[], \textcolor{keywordtype}{int} argc)}
\DoxyCodeLine{00081 \{}
\DoxyCodeLine{00082     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 1; i < argc; ++i)}
\DoxyCodeLine{00083     \{}
\DoxyCodeLine{00084         \textcolor{keywordflow}{if} (\_wcsnicmp(argv[i], L\textcolor{stringliteral}{"{}-\/warp"{}}, wcslen(argv[i])) == 0 || }
\DoxyCodeLine{00085             \_wcsnicmp(argv[i], L\textcolor{stringliteral}{"{}/warp"{}}, wcslen(argv[i])) == 0)}
\DoxyCodeLine{00086         \{}
\DoxyCodeLine{00087             m\_useWarpDevice = \textcolor{keyword}{true};}
\DoxyCodeLine{00088             m\_title = m\_title + L\textcolor{stringliteral}{"{} (WARP)"{}};}
\DoxyCodeLine{00089         \}}
\DoxyCodeLine{00090     \}}
\DoxyCodeLine{00091 \}}

\end{DoxyCode}
