\doxysection{Source.\+cpp}
\label{_week3_2_week3-3-console-performancecounter_2_source_8cpp_source}\index{Week3/Week3-\/3-\/console-\/performancecounter/Source.cpp@{Week3/Week3-\/3-\/console-\/performancecounter/Source.cpp}}
\textbf{ Go to the documentation of this file.}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001 \textcolor{preprocessor}{\#include<Windows.h>}}
\DoxyCodeLine{00002 \textcolor{preprocessor}{\#include<iostream>}}
\DoxyCodeLine{00003 \textcolor{preprocessor}{\#include "{}GameTimer.h"{}}}
\DoxyCodeLine{00004 \textcolor{keyword}{using namespace }std;}
\DoxyCodeLine{00005 \textcolor{keywordtype}{int} main()}
\DoxyCodeLine{00006 \{}
\DoxyCodeLine{00007 }
\DoxyCodeLine{00008     \textcolor{comment}{//long int          4bytes  -\/2,147,483,648 to 2,147,483,647}}
\DoxyCodeLine{00009     \textcolor{comment}{//unsigned long int 4bytes  0              to 4, 294, 967, 295}}
\DoxyCodeLine{00010     \textcolor{comment}{//long long int     8bytes  -\/(2\string^63)        to (2\string^63) -\/ 1}}
\DoxyCodeLine{00011     \textcolor{comment}{//LARGE\_INTEGER is a union of a 64-\/bit integer and a pair of 32-\/bit integers. If you want to perform 64-\/bit arithmetic on one you need to select the 64-\/bit int from inside the union.}}
\DoxyCodeLine{00012 }
\DoxyCodeLine{00013     LARGE\_INTEGER StartingTime, EndingTime, DifferenceOfTime,deltaTime;}
\DoxyCodeLine{00014     LARGE\_INTEGER frequency; \textcolor{comment}{//default frequency that is supported by the hardware}}
\DoxyCodeLine{00015 }
\DoxyCodeLine{00016 }
\DoxyCodeLine{00017     \textcolor{comment}{//The performance timer measures time in units called counts.}}
\DoxyCodeLine{00018     QueryPerformanceCounter(\&StartingTime);}
\DoxyCodeLine{00019     cout << \textcolor{stringliteral}{"{}How long does it take to execute this line?"{}} << endl;}
\DoxyCodeLine{00020     QueryPerformanceCounter(\&EndingTime);}
\DoxyCodeLine{00021 }
\DoxyCodeLine{00022     cout << \textcolor{stringliteral}{"{}Starting Time: "{}} << StartingTime.QuadPart << endl;}
\DoxyCodeLine{00023     cout << \textcolor{stringliteral}{"{}Ending Time: "{}} << EndingTime.QuadPart << endl;}
\DoxyCodeLine{00024 }
\DoxyCodeLine{00025     \textcolor{comment}{//To get the frequency(counts per second) of the performance timer}}
\DoxyCodeLine{00026     \textcolor{comment}{//the number of seconds (or fractions of a second) per count is just the reciprocal of the counts per second : mSecondsPerCount = 1.0 / (double)countsPerSec;}}
\DoxyCodeLine{00027     QueryPerformanceFrequency(\&frequency);}
\DoxyCodeLine{00028 }
\DoxyCodeLine{00029     \textcolor{comment}{//QuadPart represents a 64-\/bit signed integer (for example: 670644208300)}}
\DoxyCodeLine{00030     \textcolor{comment}{//Every LargeInteger is a union of High Part (long:156 ) and Low Part (unsigned long: 629310124)}}
\DoxyCodeLine{00031 }
\DoxyCodeLine{00032 }
\DoxyCodeLine{00033     DifferenceOfTime.QuadPart = EndingTime.QuadPart -\/ StartingTime.QuadPart;}
\DoxyCodeLine{00034 }
\DoxyCodeLine{00035     cout << \textcolor{stringliteral}{"{}Difference Of Time: "{}} << DifferenceOfTime.QuadPart << endl;}
\DoxyCodeLine{00036     cout << \textcolor{stringliteral}{"{}Frequency: "{}} << frequency.QuadPart << endl;}
\DoxyCodeLine{00037 }
\DoxyCodeLine{00038     \textcolor{comment}{//how about calculating this directly without quadpart}}
\DoxyCodeLine{00039     \textcolor{comment}{//deltaTime = EndingTime -\/ StartingTime; //no operator matches this operands . Because a large integer is a union!}}
\DoxyCodeLine{00040 }
\DoxyCodeLine{00041     DifferenceOfTime.QuadPart *= 1000000; \textcolor{comment}{//it's in microseconds}}
\DoxyCodeLine{00042 }
\DoxyCodeLine{00043     \textcolor{comment}{//To convert a time reading valueInCounts to microseconds, we just divide it by frequency}}
\DoxyCodeLine{00044     DifferenceOfTime.QuadPart /= frequency.QuadPart; \textcolor{comment}{//For Tick per seconds}}
\DoxyCodeLine{00045 }
\DoxyCodeLine{00046     DifferenceOfTime.QuadPart /= 1000; \textcolor{comment}{//the value is in milliseconds now}}
\DoxyCodeLine{00047 }
\DoxyCodeLine{00048     cout << \textcolor{stringliteral}{"{}Execution Time in milliseconds is : "{}} << DifferenceOfTime.QuadPart << endl;}
\DoxyCodeLine{00049 }
\DoxyCodeLine{00050     \textcolor{comment}{//How can we use GameTimer class}}
\DoxyCodeLine{00051     cout << \textcolor{stringliteral}{"{}Using GameTimer : "{}} << endl;}
\DoxyCodeLine{00052 }
\DoxyCodeLine{00053     GameTimer mTimer;}
\DoxyCodeLine{00054 }
\DoxyCodeLine{00055     mTimer.Reset(); \textcolor{comment}{//the first frame of animation, there is no previous frame. This initializes mPrevTime to the current time}}
\DoxyCodeLine{00056 }
\DoxyCodeLine{00057     \textcolor{keywordtype}{int} message = 10;}
\DoxyCodeLine{00058 }
\DoxyCodeLine{00059     \textcolor{keywordflow}{while} (message != 0)}
\DoxyCodeLine{00060     \{}
\DoxyCodeLine{00061             mTimer.Start();  \textcolor{comment}{//Call when unpaused.}}
\DoxyCodeLine{00062             mTimer.Tick();   \textcolor{comment}{//Call every frame.}}
\DoxyCodeLine{00063 }
\DoxyCodeLine{00064             cout << \textcolor{stringliteral}{"{}the delta time now is : "{}} << mTimer.DeltaTime() * 1000 << endl; \textcolor{comment}{//in milliseconds}}
\DoxyCodeLine{00065             }
\DoxyCodeLine{00066             \textcolor{comment}{// Returns the total time elapsed since Reset() was called, NOT counting any  time when the clock is stopped.}}
\DoxyCodeLine{00067             cout << \textcolor{stringliteral}{"{}the total time now is : "{}} << mTimer.TotalTime() * 1000 << endl; \textcolor{comment}{//in milliseconds}}
\DoxyCodeLine{00068             mTimer.Stop(); \textcolor{comment}{//Call when paused.}}
\DoxyCodeLine{00069 }
\DoxyCodeLine{00070             Sleep(1000);    }
\DoxyCodeLine{00071             message-\/-\/;}
\DoxyCodeLine{00072         }
\DoxyCodeLine{00073     \}}
\DoxyCodeLine{00074 }
\DoxyCodeLine{00075 }
\DoxyCodeLine{00076     system(\textcolor{stringliteral}{"{}pause"{}});}
\DoxyCodeLine{00077     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00078 \}}

\end{DoxyCode}
