\doxysection{Load\+M3d.\+h}
\label{_load_m3d_8h_source}\index{Week15/SkinnedMesh/LoadM3d.h@{Week15/SkinnedMesh/LoadM3d.h}}
\textbf{ Go to the documentation of this file.}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001 \textcolor{preprocessor}{\#ifndef LOADM3D\_H}}
\DoxyCodeLine{00002 \textcolor{preprocessor}{\#define LOADM3D\_H}}
\DoxyCodeLine{00003 }
\DoxyCodeLine{00004 \textcolor{preprocessor}{\#include "{}SkinnedData.h"{}}}
\DoxyCodeLine{00005 }
\DoxyCodeLine{00006 }
\DoxyCodeLine{00007 }
\DoxyCodeLine{00008 \textcolor{keyword}{class }M3DLoader}
\DoxyCodeLine{00009 \{}
\DoxyCodeLine{00010 \textcolor{keyword}{public}:}
\DoxyCodeLine{00011     \textcolor{keyword}{struct }Vertex}
\DoxyCodeLine{00012     \{}
\DoxyCodeLine{00013         DirectX::XMFLOAT3 Pos;}
\DoxyCodeLine{00014         DirectX::XMFLOAT3 Normal;}
\DoxyCodeLine{00015         DirectX::XMFLOAT2 TexC;}
\DoxyCodeLine{00016         DirectX::XMFLOAT4 TangentU;}
\DoxyCodeLine{00017     \};}
\DoxyCodeLine{00018 }
\DoxyCodeLine{00019     \textcolor{keyword}{struct }SkinnedVertex}
\DoxyCodeLine{00020     \{}
\DoxyCodeLine{00021         DirectX::XMFLOAT3 Pos;}
\DoxyCodeLine{00022         DirectX::XMFLOAT3 Normal;}
\DoxyCodeLine{00023         DirectX::XMFLOAT2 TexC;}
\DoxyCodeLine{00024         DirectX::XMFLOAT3 TangentU;}
\DoxyCodeLine{00025         DirectX::XMFLOAT3 BoneWeights;}
\DoxyCodeLine{00026         BYTE BoneIndices[4];}
\DoxyCodeLine{00027     \};}
\DoxyCodeLine{00028 }
\DoxyCodeLine{00029     \textcolor{keyword}{struct }Subset}
\DoxyCodeLine{00030     \{}
\DoxyCodeLine{00031         UINT Id = -\/1;}
\DoxyCodeLine{00032         UINT VertexStart = 0;}
\DoxyCodeLine{00033         UINT VertexCount = 0;}
\DoxyCodeLine{00034         UINT FaceStart = 0;}
\DoxyCodeLine{00035         UINT FaceCount = 0;}
\DoxyCodeLine{00036     \};}
\DoxyCodeLine{00037 }
\DoxyCodeLine{00038     \textcolor{keyword}{struct }M3dMaterial}
\DoxyCodeLine{00039     \{}
\DoxyCodeLine{00040         std::string Name;}
\DoxyCodeLine{00041 }
\DoxyCodeLine{00042         DirectX::XMFLOAT4 DiffuseAlbedo = \{ 1.0f, 1.0f, 1.0f, 1.0f \};}
\DoxyCodeLine{00043         DirectX::XMFLOAT3 FresnelR0 = \{ 0.01f, 0.01f, 0.01f \};}
\DoxyCodeLine{00044         \textcolor{keywordtype}{float} Roughness = 0.8f;}
\DoxyCodeLine{00045         \textcolor{keywordtype}{bool} AlphaClip = \textcolor{keyword}{false};}
\DoxyCodeLine{00046 }
\DoxyCodeLine{00047         std::string MaterialTypeName;}
\DoxyCodeLine{00048         std::string DiffuseMapName;}
\DoxyCodeLine{00049         std::string NormalMapName;}
\DoxyCodeLine{00050     \};}
\DoxyCodeLine{00051 }
\DoxyCodeLine{00052     \textcolor{keywordtype}{bool} LoadM3d(\textcolor{keyword}{const} std::string\& filename, }
\DoxyCodeLine{00053         std::vector<Vertex>\& vertices,}
\DoxyCodeLine{00054         std::vector<USHORT>\& indices,}
\DoxyCodeLine{00055         std::vector<Subset>\& subsets,}
\DoxyCodeLine{00056         std::vector<M3dMaterial>\& mats);}
\DoxyCodeLine{00057     \textcolor{keywordtype}{bool} LoadM3d(\textcolor{keyword}{const} std::string\& filename, }
\DoxyCodeLine{00058         std::vector<SkinnedVertex>\& vertices,}
\DoxyCodeLine{00059         std::vector<USHORT>\& indices,}
\DoxyCodeLine{00060         std::vector<Subset>\& subsets,}
\DoxyCodeLine{00061         std::vector<M3dMaterial>\& mats,}
\DoxyCodeLine{00062         SkinnedData\& skinInfo);}
\DoxyCodeLine{00063 }
\DoxyCodeLine{00064 \textcolor{keyword}{private}:}
\DoxyCodeLine{00065     \textcolor{keywordtype}{void} ReadMaterials(std::ifstream\& fin, UINT numMaterials, std::vector<M3dMaterial>\& mats);}
\DoxyCodeLine{00066     \textcolor{keywordtype}{void} ReadSubsetTable(std::ifstream\& fin, UINT numSubsets, std::vector<Subset>\& subsets);}
\DoxyCodeLine{00067     \textcolor{keywordtype}{void} ReadVertices(std::ifstream\& fin, UINT numVertices, std::vector<Vertex>\& vertices);}
\DoxyCodeLine{00068     \textcolor{keywordtype}{void} ReadSkinnedVertices(std::ifstream\& fin, UINT numVertices, std::vector<SkinnedVertex>\& vertices);}
\DoxyCodeLine{00069     \textcolor{keywordtype}{void} ReadTriangles(std::ifstream\& fin, UINT numTriangles, std::vector<USHORT>\& indices);}
\DoxyCodeLine{00070     \textcolor{keywordtype}{void} ReadBoneOffsets(std::ifstream\& fin, UINT numBones, std::vector<DirectX::XMFLOAT4X4>\& boneOffsets);}
\DoxyCodeLine{00071     \textcolor{keywordtype}{void} ReadBoneHierarchy(std::ifstream\& fin, UINT numBones, std::vector<int>\& boneIndexToParentIndex);}
\DoxyCodeLine{00072     \textcolor{keywordtype}{void} ReadAnimationClips(std::ifstream\& fin, UINT numBones, UINT numAnimationClips, std::unordered\_map<std::string, AnimationClip>\& animations);}
\DoxyCodeLine{00073     \textcolor{keywordtype}{void} ReadBoneKeyframes(std::ifstream\& fin, UINT numBones, BoneAnimation\& boneAnimation);}
\DoxyCodeLine{00074 \};}
\DoxyCodeLine{00075 }
\DoxyCodeLine{00076 }
\DoxyCodeLine{00077 }
\DoxyCodeLine{00078 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// LOADM3D\_H}}

\end{DoxyCode}
