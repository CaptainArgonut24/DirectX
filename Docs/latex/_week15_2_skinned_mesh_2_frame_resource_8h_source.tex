\doxysection{Frame\+Resource.\+h}
\label{_week15_2_skinned_mesh_2_frame_resource_8h_source}\index{Week15/SkinnedMesh/FrameResource.h@{Week15/SkinnedMesh/FrameResource.h}}
\textbf{ Go to the documentation of this file.}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{00002 }
\DoxyCodeLine{00003 \textcolor{preprocessor}{\#include "{}../../Common/d3dUtil.h"{}}}
\DoxyCodeLine{00004 \textcolor{preprocessor}{\#include "{}../../Common/MathHelper.h"{}}}
\DoxyCodeLine{00005 \textcolor{preprocessor}{\#include "{}../../Common/UploadBuffer.h"{}}}
\DoxyCodeLine{00006 }
\DoxyCodeLine{00007 \textcolor{keyword}{struct }ObjectConstants}
\DoxyCodeLine{00008 \{}
\DoxyCodeLine{00009     DirectX::XMFLOAT4X4 World = MathHelper::Identity4x4();}
\DoxyCodeLine{00010     DirectX::XMFLOAT4X4 TexTransform = MathHelper::Identity4x4();}
\DoxyCodeLine{00011     UINT     MaterialIndex;}
\DoxyCodeLine{00012     UINT     ObjPad0;}
\DoxyCodeLine{00013     UINT     ObjPad1;}
\DoxyCodeLine{00014     UINT     ObjPad2;}
\DoxyCodeLine{00015 \};}
\DoxyCodeLine{00016 }
\DoxyCodeLine{00017 \textcolor{keyword}{struct }SkinnedConstants}
\DoxyCodeLine{00018 \{}
\DoxyCodeLine{00019     DirectX::XMFLOAT4X4 BoneTransforms[96];}
\DoxyCodeLine{00020 \};}
\DoxyCodeLine{00021 }
\DoxyCodeLine{00022 \textcolor{keyword}{struct }PassConstants}
\DoxyCodeLine{00023 \{}
\DoxyCodeLine{00024     DirectX::XMFLOAT4X4 View = MathHelper::Identity4x4();}
\DoxyCodeLine{00025     DirectX::XMFLOAT4X4 InvView = MathHelper::Identity4x4();}
\DoxyCodeLine{00026     DirectX::XMFLOAT4X4 Proj = MathHelper::Identity4x4();}
\DoxyCodeLine{00027     DirectX::XMFLOAT4X4 InvProj = MathHelper::Identity4x4();}
\DoxyCodeLine{00028     DirectX::XMFLOAT4X4 ViewProj = MathHelper::Identity4x4();}
\DoxyCodeLine{00029     DirectX::XMFLOAT4X4 InvViewProj = MathHelper::Identity4x4();}
\DoxyCodeLine{00030     DirectX::XMFLOAT4X4 ViewProjTex = MathHelper::Identity4x4();}
\DoxyCodeLine{00031     DirectX::XMFLOAT4X4 ShadowTransform = MathHelper::Identity4x4();}
\DoxyCodeLine{00032     DirectX::XMFLOAT3 EyePosW = \{ 0.0f, 0.0f, 0.0f \};}
\DoxyCodeLine{00033     \textcolor{keywordtype}{float} cbPerObjectPad1 = 0.0f;}
\DoxyCodeLine{00034     DirectX::XMFLOAT2 RenderTargetSize = \{ 0.0f, 0.0f \};}
\DoxyCodeLine{00035     DirectX::XMFLOAT2 InvRenderTargetSize = \{ 0.0f, 0.0f \};}
\DoxyCodeLine{00036     \textcolor{keywordtype}{float} NearZ = 0.0f;}
\DoxyCodeLine{00037     \textcolor{keywordtype}{float} FarZ = 0.0f;}
\DoxyCodeLine{00038     \textcolor{keywordtype}{float} TotalTime = 0.0f;}
\DoxyCodeLine{00039     \textcolor{keywordtype}{float} DeltaTime = 0.0f;}
\DoxyCodeLine{00040 }
\DoxyCodeLine{00041     DirectX::XMFLOAT4 AmbientLight = \{ 0.0f, 0.0f, 0.0f, 1.0f \};}
\DoxyCodeLine{00042 }
\DoxyCodeLine{00043     \textcolor{comment}{// Indices [0, NUM\_DIR\_LIGHTS) are directional lights;}}
\DoxyCodeLine{00044     \textcolor{comment}{// indices [NUM\_DIR\_LIGHTS, NUM\_DIR\_LIGHTS+NUM\_POINT\_LIGHTS) are point lights;}}
\DoxyCodeLine{00045     \textcolor{comment}{// indices [NUM\_DIR\_LIGHTS+NUM\_POINT\_LIGHTS, NUM\_DIR\_LIGHTS+NUM\_POINT\_LIGHT+NUM\_SPOT\_LIGHTS)}}
\DoxyCodeLine{00046     \textcolor{comment}{// are spot lights for a maximum of MaxLights per object.}}
\DoxyCodeLine{00047     Light Lights[MaxLights];}
\DoxyCodeLine{00048 \};}
\DoxyCodeLine{00049 }
\DoxyCodeLine{00050 \textcolor{keyword}{struct }SsaoConstants}
\DoxyCodeLine{00051 \{}
\DoxyCodeLine{00052     DirectX::XMFLOAT4X4 Proj;}
\DoxyCodeLine{00053     DirectX::XMFLOAT4X4 InvProj;}
\DoxyCodeLine{00054     DirectX::XMFLOAT4X4 ProjTex;}
\DoxyCodeLine{00055     DirectX::XMFLOAT4   OffsetVectors[14];}
\DoxyCodeLine{00056 }
\DoxyCodeLine{00057     \textcolor{comment}{// For SsaoBlur.hlsl}}
\DoxyCodeLine{00058     DirectX::XMFLOAT4 BlurWeights[3];}
\DoxyCodeLine{00059 }
\DoxyCodeLine{00060     DirectX::XMFLOAT2 InvRenderTargetSize = \{ 0.0f, 0.0f \};}
\DoxyCodeLine{00061 }
\DoxyCodeLine{00062     \textcolor{comment}{// Coordinates given in view space.}}
\DoxyCodeLine{00063     \textcolor{keywordtype}{float} OcclusionRadius  = 0.5f;}
\DoxyCodeLine{00064     \textcolor{keywordtype}{float} OcclusionFadeStart = 0.2f;}
\DoxyCodeLine{00065     \textcolor{keywordtype}{float} OcclusionFadeEnd = 2.0f;}
\DoxyCodeLine{00066     \textcolor{keywordtype}{float} SurfaceEpsilon = 0.05f;}
\DoxyCodeLine{00067 \};}
\DoxyCodeLine{00068 }
\DoxyCodeLine{00069 \textcolor{keyword}{struct }MaterialData}
\DoxyCodeLine{00070 \{}
\DoxyCodeLine{00071     DirectX::XMFLOAT4 DiffuseAlbedo = \{ 1.0f, 1.0f, 1.0f, 1.0f \};}
\DoxyCodeLine{00072     DirectX::XMFLOAT3 FresnelR0 = \{ 0.01f, 0.01f, 0.01f \};}
\DoxyCodeLine{00073     \textcolor{keywordtype}{float} Roughness = 0.5f;}
\DoxyCodeLine{00074 }
\DoxyCodeLine{00075     \textcolor{comment}{// Used in texture mapping.}}
\DoxyCodeLine{00076     DirectX::XMFLOAT4X4 MatTransform = MathHelper::Identity4x4();}
\DoxyCodeLine{00077 }
\DoxyCodeLine{00078     UINT DiffuseMapIndex = 0;}
\DoxyCodeLine{00079     UINT NormalMapIndex = 0;}
\DoxyCodeLine{00080     UINT MaterialPad1;}
\DoxyCodeLine{00081     UINT MaterialPad2;}
\DoxyCodeLine{00082 \};}
\DoxyCodeLine{00083 }
\DoxyCodeLine{00084 \textcolor{keyword}{struct }Vertex}
\DoxyCodeLine{00085 \{}
\DoxyCodeLine{00086     DirectX::XMFLOAT3 Pos;}
\DoxyCodeLine{00087     DirectX::XMFLOAT3 Normal;}
\DoxyCodeLine{00088     DirectX::XMFLOAT2 TexC;}
\DoxyCodeLine{00089     DirectX::XMFLOAT3 TangentU;}
\DoxyCodeLine{00090 \};}
\DoxyCodeLine{00091 }
\DoxyCodeLine{00092 \textcolor{keyword}{struct }SkinnedVertex}
\DoxyCodeLine{00093 \{}
\DoxyCodeLine{00094     DirectX::XMFLOAT3 Pos;}
\DoxyCodeLine{00095     DirectX::XMFLOAT3 Normal;}
\DoxyCodeLine{00096     DirectX::XMFLOAT2 TexC;}
\DoxyCodeLine{00097     DirectX::XMFLOAT3 TangentU;}
\DoxyCodeLine{00098     DirectX::XMFLOAT3 BoneWeights;}
\DoxyCodeLine{00099     BYTE BoneIndices[4];}
\DoxyCodeLine{00100 \};}
\DoxyCodeLine{00101 }
\DoxyCodeLine{00102 \textcolor{comment}{// Stores the resources needed for the CPU to build the command lists}}
\DoxyCodeLine{00103 \textcolor{comment}{// for a frame.  }}
\DoxyCodeLine{00104 \textcolor{keyword}{struct }FrameResource}
\DoxyCodeLine{00105 \{}
\DoxyCodeLine{00106 \textcolor{keyword}{public}:}
\DoxyCodeLine{00107     }
\DoxyCodeLine{00108     FrameResource(ID3D12Device* device, UINT passCount, UINT objectCount, UINT skinnedObjectCount, UINT materialCount);}
\DoxyCodeLine{00109     FrameResource(\textcolor{keyword}{const} FrameResource\& rhs) = \textcolor{keyword}{delete};}
\DoxyCodeLine{00110     FrameResource\& operator=(\textcolor{keyword}{const} FrameResource\& rhs) = \textcolor{keyword}{delete};}
\DoxyCodeLine{00111     \string~FrameResource();}
\DoxyCodeLine{00112 }
\DoxyCodeLine{00113     \textcolor{comment}{// We cannot reset the allocator until the GPU is done processing the commands.}}
\DoxyCodeLine{00114     \textcolor{comment}{// So each frame needs their own allocator.}}
\DoxyCodeLine{00115     Microsoft::WRL::ComPtr<ID3D12CommandAllocator> CmdListAlloc;}
\DoxyCodeLine{00116 }
\DoxyCodeLine{00117     \textcolor{comment}{// We cannot update a cbuffer until the GPU is done processing the commands}}
\DoxyCodeLine{00118     \textcolor{comment}{// that reference it.  So each frame needs their own cbuffers.}}
\DoxyCodeLine{00119     std::unique\_ptr<UploadBuffer<PassConstants>> PassCB = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00120     std::unique\_ptr<UploadBuffer<ObjectConstants>> ObjectCB = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00121     std::unique\_ptr<UploadBuffer<SkinnedConstants>> SkinnedCB = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00122     std::unique\_ptr<UploadBuffer<SsaoConstants>> SsaoCB = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00123     std::unique\_ptr<UploadBuffer<MaterialData>> MaterialBuffer = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00124 }
\DoxyCodeLine{00125     \textcolor{comment}{// Fence value to mark commands up to this fence point.  This lets us}}
\DoxyCodeLine{00126     \textcolor{comment}{// check if these frame resources are still in use by the GPU.}}
\DoxyCodeLine{00127     UINT64 Fence = 0;}
\DoxyCodeLine{00128 \};}

\end{DoxyCode}
