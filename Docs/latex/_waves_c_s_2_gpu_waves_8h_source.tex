\doxysection{Gpu\+Waves.\+h}
\label{_waves_c_s_2_gpu_waves_8h_source}\index{Week8/WavesCS/GpuWaves.h@{Week8/WavesCS/GpuWaves.h}}
\textbf{ Go to the documentation of this file.}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001 \textcolor{comment}{//***************************************************************************************}}
\DoxyCodeLine{00002 \textcolor{comment}{// GpuWaves.h by Frank Luna (C) 2011 All Rights Reserved.}}
\DoxyCodeLine{00003 \textcolor{comment}{//}}
\DoxyCodeLine{00004 \textcolor{comment}{// Performs the calculations for the wave simulation using the ComputeShader on the GPU.  }}
\DoxyCodeLine{00005 \textcolor{comment}{// The solution is saved to a floating-\/point texture.  The client must then set this }}
\DoxyCodeLine{00006 \textcolor{comment}{// texture as a SRV and do the displacement mapping in the vertex shader over a grid.}}
\DoxyCodeLine{00007 \textcolor{comment}{//***************************************************************************************}}
\DoxyCodeLine{00008 }
\DoxyCodeLine{00009 \textcolor{preprocessor}{\#ifndef GPUWAVES\_H}}
\DoxyCodeLine{00010 \textcolor{preprocessor}{\#define GPUWAVES\_H}}
\DoxyCodeLine{00011 }
\DoxyCodeLine{00012 \textcolor{preprocessor}{\#include "{}../../Common/d3dUtil.h"{}}}
\DoxyCodeLine{00013 \textcolor{preprocessor}{\#include "{}../../Common/GameTimer.h"{}}}
\DoxyCodeLine{00014 }
\DoxyCodeLine{00015 \textcolor{keyword}{class }GpuWaves}
\DoxyCodeLine{00016 \{}
\DoxyCodeLine{00017 \textcolor{keyword}{public}:}
\DoxyCodeLine{00018     \textcolor{comment}{// Note that m,n should be divisible by 16 so there is no }}
\DoxyCodeLine{00019     \textcolor{comment}{// remainder when we divide into thread groups.}}
\DoxyCodeLine{00020     GpuWaves(ID3D12Device* device, ID3D12GraphicsCommandList* cmdList, \textcolor{keywordtype}{int} m, \textcolor{keywordtype}{int} n, \textcolor{keywordtype}{float} dx, \textcolor{keywordtype}{float} dt, \textcolor{keywordtype}{float} speed, \textcolor{keywordtype}{float} damping);}
\DoxyCodeLine{00021     GpuWaves(\textcolor{keyword}{const} GpuWaves\& rhs) = \textcolor{keyword}{delete};}
\DoxyCodeLine{00022     GpuWaves\& operator=(\textcolor{keyword}{const} GpuWaves\& rhs) = \textcolor{keyword}{delete};}
\DoxyCodeLine{00023     \string~GpuWaves()=\textcolor{keywordflow}{default};}
\DoxyCodeLine{00024 }
\DoxyCodeLine{00025     UINT RowCount()\textcolor{keyword}{const};}
\DoxyCodeLine{00026     UINT ColumnCount()\textcolor{keyword}{const};}
\DoxyCodeLine{00027     UINT VertexCount()\textcolor{keyword}{const};}
\DoxyCodeLine{00028     UINT TriangleCount()\textcolor{keyword}{const};}
\DoxyCodeLine{00029     \textcolor{keywordtype}{float} Width()\textcolor{keyword}{const};}
\DoxyCodeLine{00030     \textcolor{keywordtype}{float} Depth()\textcolor{keyword}{const};}
\DoxyCodeLine{00031     \textcolor{keywordtype}{float} SpatialStep()\textcolor{keyword}{const};}
\DoxyCodeLine{00032 }
\DoxyCodeLine{00033     CD3DX12\_GPU\_DESCRIPTOR\_HANDLE DisplacementMap()\textcolor{keyword}{const};}
\DoxyCodeLine{00034 }
\DoxyCodeLine{00035     UINT DescriptorCount()\textcolor{keyword}{const};}
\DoxyCodeLine{00036 }
\DoxyCodeLine{00037     \textcolor{keywordtype}{void} BuildResources(ID3D12GraphicsCommandList* cmdList);}
\DoxyCodeLine{00038 }
\DoxyCodeLine{00039     \textcolor{keywordtype}{void} BuildDescriptors(}
\DoxyCodeLine{00040         CD3DX12\_CPU\_DESCRIPTOR\_HANDLE hCpuDescriptor,}
\DoxyCodeLine{00041         CD3DX12\_GPU\_DESCRIPTOR\_HANDLE hGpuDescriptor,}
\DoxyCodeLine{00042         UINT descriptorSize);}
\DoxyCodeLine{00043 }
\DoxyCodeLine{00044     \textcolor{keywordtype}{void} Update(}
\DoxyCodeLine{00045         \textcolor{keyword}{const} GameTimer\& gt,}
\DoxyCodeLine{00046         ID3D12GraphicsCommandList* cmdList, }
\DoxyCodeLine{00047         ID3D12RootSignature* rootSig,}
\DoxyCodeLine{00048         ID3D12PipelineState* pso);}
\DoxyCodeLine{00049 }
\DoxyCodeLine{00050     \textcolor{keywordtype}{void} Disturb(}
\DoxyCodeLine{00051         ID3D12GraphicsCommandList* cmdList,}
\DoxyCodeLine{00052         ID3D12RootSignature* rootSig,}
\DoxyCodeLine{00053         ID3D12PipelineState* pso, }
\DoxyCodeLine{00054         UINT i, UINT j, }
\DoxyCodeLine{00055         \textcolor{keywordtype}{float} magnitude);}
\DoxyCodeLine{00056 }
\DoxyCodeLine{00057 \textcolor{keyword}{private}:}
\DoxyCodeLine{00058 }
\DoxyCodeLine{00059     UINT mNumRows;}
\DoxyCodeLine{00060     UINT mNumCols;}
\DoxyCodeLine{00061 }
\DoxyCodeLine{00062     UINT mVertexCount;}
\DoxyCodeLine{00063     UINT mTriangleCount;}
\DoxyCodeLine{00064 }
\DoxyCodeLine{00065     \textcolor{comment}{// Simulation constants we can precompute.}}
\DoxyCodeLine{00066     \textcolor{keywordtype}{float} mK[3];}
\DoxyCodeLine{00067 }
\DoxyCodeLine{00068     \textcolor{keywordtype}{float} mTimeStep;}
\DoxyCodeLine{00069     \textcolor{keywordtype}{float} mSpatialStep;}
\DoxyCodeLine{00070 }
\DoxyCodeLine{00071     ID3D12Device* md3dDevice = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00072 }
\DoxyCodeLine{00073     CD3DX12\_GPU\_DESCRIPTOR\_HANDLE mPrevSolSrv;}
\DoxyCodeLine{00074     CD3DX12\_GPU\_DESCRIPTOR\_HANDLE mCurrSolSrv;}
\DoxyCodeLine{00075     CD3DX12\_GPU\_DESCRIPTOR\_HANDLE mNextSolSrv;}
\DoxyCodeLine{00076 }
\DoxyCodeLine{00077     CD3DX12\_GPU\_DESCRIPTOR\_HANDLE mPrevSolUav;}
\DoxyCodeLine{00078     CD3DX12\_GPU\_DESCRIPTOR\_HANDLE mCurrSolUav;}
\DoxyCodeLine{00079     CD3DX12\_GPU\_DESCRIPTOR\_HANDLE mNextSolUav;}
\DoxyCodeLine{00080 }
\DoxyCodeLine{00081     \textcolor{comment}{// Two for ping-\/ponging the textures.}}
\DoxyCodeLine{00082     Microsoft::WRL::ComPtr<ID3D12Resource> mPrevSol = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00083     Microsoft::WRL::ComPtr<ID3D12Resource> mCurrSol = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00084     Microsoft::WRL::ComPtr<ID3D12Resource> mNextSol = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00085 }
\DoxyCodeLine{00086     Microsoft::WRL::ComPtr<ID3D12Resource> mPrevUploadBuffer = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00087     Microsoft::WRL::ComPtr<ID3D12Resource> mCurrUploadBuffer = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00088 \};}
\DoxyCodeLine{00089 }
\DoxyCodeLine{00090 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// GPUWAVES\_H}}

\end{DoxyCode}
